(this.webpackJsonpwebphone=this.webpackJsonpwebphone||[]).push([[0],{11:function(e,t,n){"use strict";var s;n.d(t,"a",(function(){return s})),function(e){e.CALL="CALL",e.SWAP="SWAP",e.END="END",e.MUTE="MUTE",e.ACCEPT="ACCEPT",e.HOLD_ACCEPT="HOLDACCEPT",e.END_ACCEPT="ENDACCEPT",e.REJECT="REJECT",e.TRANSFER="TRANSFER",e.CONFERENCE="CONFERENCE",e.SETTINGS="SETTINGS",e.EXIT="EXIT"}(s||(s={}))},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var s,a=n(16),i=n.n(a),r=n(69),c=n.n(r),o=(n(63),n(93),n(114),n(1)),l=n(3),d=n(4),u=n(5),b=(n(115),n(116),n(117),n(20)),m=n(33),h=n(15),p=n(59),j=n(129),f=n(12),v=n(0);!function(e){e.IDEAL="IDEAL",e.REGISTERING="REGISTERING",e.REGISTERED="REGISTERED"}(s||(s={}));var x=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={server:{name:"",user:"",password:"",server:"",port:7443},hasLoginDetails:!1,regState:s.IDEAL,loginError:""},e.handleInputs=function(t){var n=t.target,s=n.value,a=n.name;e.setState(Object(h.a)(Object(h.a)({},e.state),{},{server:Object(h.a)(Object(h.a)({},e.state.server),{},Object(m.a)({},a,s))}))},e.handleRegistrationClick=function(){e.setState({regState:s.REGISTERING});var t={uri:p.a.makeURI("sip:".concat(e.state.server.user,"@").concat(e.state.server.server)),transportOptions:{server:"wss://".concat(e.state.server.server,":").concat(e.state.server.port)},authorizationUsername:e.state.server.user,authorizationPassword:e.state.server.password,displayName:e.state.server.user,sendInitialProvisionalResponse:!0,logBuiltinEnabled:!1,userAgentString:"SIP.js/0.7.8 SaraPhone 04",sessionDescriptionHandlerFactoryOptions:{iceCheckingTimeout:500},logLevel:"debug"},n=new p.a(t),a={expires:1e3,refreshFrequency:80,onReject:function(t){n.stop(),e.setState({loginError:"Forbidden"===t.message.reasonPhrase?"Username or password incorrect":t.message.reasonPhrase,hasLoginDetails:!1,regState:s.IDEAL})}},i=new j.a(n,a);i.stateChange.addListener((function(t){t===f.a.Registered&&e.props.handleRegistered(n,e.state.server)})),n.start().then((function(){i.register()}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object(h.a)(Object(h.a)({},this.state),{},{server:{name:document.getElementById("name").value||document.getElementById("username").value,user:document.getElementById("username").value,password:document.getElementById("password").value,server:document.getElementById("server").value,port:parseInt(document.getElementById("port").value)}}),(function(){""===e.state.server.user||""===e.state.server.password||""===e.state.server.server?e.setState({hasLoginDetails:!1}):(e.setState({hasLoginDetails:!0}),e.handleRegistrationClick())}))}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center dark:bg-transparent",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("div",{className:"col-lg-8",children:Object(v.jsx)("div",{className:"card-group d-block d-md-flex row",children:Object(v.jsx)("div",{className:"card col-md-7 p-4 mb-0",children:Object(v.jsx)("div",{className:"card-body",children:Object(v.jsx)("div",{id:"signin",className:"d-flex flex-column",style:{height:"100%"},children:Object(v.jsxs)("div",{className:"row text-center mx-auto my-auto",style:{width:"80%"},children:[Object(v.jsx)("span",{className:"w-100 mb-5",children:Object(v.jsx)("img",{src:"./img/logo.png",alt:"Logo",className:"mx-auto",style:{width:"150px",height:"auto"}})}),Object(v.jsxs)("form",{className:this.state.hasLoginDetails?"d-none":"d-block",children:[Object(v.jsx)("input",{type:"text",placeholder:"Username",name:"user",autoComplete:"off",className:"form-control my-2",value:this.state.server.user,onChange:this.handleInputs}),Object(v.jsx)("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",className:"form-control my-2",value:this.state.server.password,onChange:this.handleInputs}),Object(v.jsx)("input",{type:"text",placeholder:"Server",name:"server",autoComplete:"off",className:"form-control my-2",value:this.state.server.server,onChange:this.handleInputs}),Object(v.jsx)("input",{type:"text",placeholder:"port",name:"port",autoComplete:"off",className:"form-control my-2",value:this.state.server.port,onChange:this.handleInputs})]}),Object(v.jsxs)("div",{id:"login-button",children:[Object(v.jsxs)("button",{className:"btn btn-primary form-control",id:"loginbtn",type:"button",onClick:this.handleRegistrationClick,disabled:this.state.regState===s.REGISTERING,children:[Object(v.jsx)("div",{style:{pointerEvents:"none",display:this.state.regState===s.REGISTERING?"none":"block"},children:"Connect"}),Object(v.jsxs)("div",{style:{pointerEvents:"none"},className:this.state.regState===s.REGISTERING?"":"d-none",children:[Object(v.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(v.jsx)("span",{className:"sr-only ms-2",children:"Registering in please wait..."})]})]}),Object(v.jsx)("span",{id:"loginErrorMessage",className:""!==this.state.loginError?"mt-2 badge bg-danger":"mt-2 badge bg-danger d-none",children:this.state.loginError}),Object(v.jsx)("button",{className:"btn btn-danger form-control my-2",onClick:function(){window.location.replace("/")},children:"Back to fusionpbx"})]})]})})})})})})})})})}}]),n}(a.Component),O=n(71),g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isSignedin:!1,UA:null,server:null},e.handleRegistered=function(t,n){t.stateChange.addListener((function(t){switch(t){case b.a.Started:console.log("UA Started.");break;case b.a.Stopped:e.setState({isSignedin:!1,UA:null}),console.log("UA Disconnected.")}})),e.setState({UA:t,isSignedin:!0,server:n},(function(){e.state.UA.delegate.onDisconnect=function(){e.setState({isSignedin:!1,UA:null})}}))},e}return Object(l.a)(n,[{key:"render",value:function(){switch(this.state.isSignedin){case!0:return Object(v.jsx)(O.a,{UserAgent:this.state.UA,server:this.state.server});case!1:return Object(v.jsx)(x,{handleRegistered:this.handleRegistered})}}}]),n}(i.a.Component);c.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(g,{})}),document.getElementById("root"))},24:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var s={a0:new Audio("./wav/0.wav"),a1:new Audio("./wav/1.wav"),a2:new Audio("./wav/2.wav"),a3:new Audio("./wav/3.wav"),a4:new Audio("./wav/4.wav"),a5:new Audio("./wav/5.wav"),a6:new Audio("./wav/6.wav"),a7:new Audio("./wav/7.wav"),a8:new Audio("./wav/8.wav"),a9:new Audio("./wav/9.wav"),"a*":new Audio("./wav/star.wav"),"a#":new Audio("./wav/hash.wav")},a={ring1:new Audio("./wav/ring1.mp3"),ring2:new Audio("./wav/ring2.mp3"),ring3:new Audio("./wav/ring3.mp3"),ring4:new Audio("./wav/ring4.mp3"),ring5:new Audio("./wav/ring5.mp3")}},71:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k}));var s=n(10),a=n.n(s),i=n(25),r=n(33),c=n(15),o=n(1),l=n(3),d=n(4),u=n(5),b=n(16),m=n.n(b),h=n(2),p=n(45),j=n(59),f=n(54),v=n(55),x=n(24),O=n(8),g=n(72),N=n(76),w=n(11),y=n(73),C=n(74),E=n(0),k=function(t){Object(d.a)(s,t);var n=Object(u.a)(s);function s(){var t;Object(o.a)(this,s);for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];return(t=n.call.apply(n,[this].concat(d))).state={calls:[],isMute:!1,dialerNumber:"",mediaDevices:Array(),settings:{mic:"default",ringer:"ring1",touchTones:!0},transferInitiated:!1,showSettings:!1},t.mediaElement=void 0,t.RemoteStream=new MediaStream,t.handleKeyPress=function(e){if(["0","1","2","3","4","5","6","7","8","9","*","#","+"].includes(e.key))"dialerNumber"!==document.activeElement.id&&t.handleNumericKeyPress(e.key);else switch(e.key){case"?":alert("*********************************************\n?     Show this keyboard help\n\u21b5      Make new call\nEsc      Terminate Call\nSpace     Mute\n*********************************************");break;case"Enter":Object(O.b)("enter");break;case"Escape":Object(O.b)("escape");break;case"Backspace":"dialerNumber"!==document.activeElement.id&&t.setState({dialerNumber:t.state.dialerNumber.slice(0,-1)})}},t.handleDialerKeyPress=function(n){if(["0","1","2","3","4","5","6","7","8","9","*","#"].includes(n))t.handleNumericKeyPress(n);else if("e"===n)t.setState({dialerNumber:t.state.dialerNumber.slice(0,-1)});else switch(n){case w.a.MUTE:t.toggleMute();break;case w.a.SWAP:t.swapCalls();break;case w.a.CALL:t.initiateCall();break;case w.a.END:t.disconnectCall();break;case w.a.TRANSFER:t.handleCallTransfer();break;case w.a.SETTINGS:t.state.showSettings&&Object.keys(x.a).forEach((function(e){x.a[e].pause()})),t.setState({showSettings:!t.state.showSettings});break;case w.a.CONFERENCE:t.handleConference();break;case w.a.EXIT:t.props.UserAgent.stop(),e.location.replace("/")}},t.handleNumericKeyPress=function(e){var n;t.setState({dialerNumber:t.state.dialerNumber+e}),null===(n=t.state.calls.find((function(e){return!1===e.isHold})))||void 0===n||n.session.sessionDescriptionHandler.sendDtmf(e,{duration:100,interToneGap:100}),t.state.settings.touchTones&&x.b["a".concat(e)].play()},t.handleInput=function(e){e.preventDefault();var n=e.target,s=n.name,a=n.value;(["0","1","2","3","4","5","6","7","8","9","*","#","+"].includes(e.nativeEvent.data)||["deleteContentForward","deleteContentBackward","insertFromPaste"].includes(e.nativeEvent.inputType))&&t.setState(Object(c.a)(Object(c.a)({},t.state),{},Object(r.a)({},s,a.replace(/(?![0-9#*+,])./gi,""))))},t.toggleMute=function(){t.state.calls.forEach((function(e){t.state.isMute?(Object(O.b)("un muting"),e.session.sessionDescriptionHandler.peerConnection.getSenders().forEach((function(e){e.track.enabled=!0}))):(Object(O.b)("muting"),e.session.sessionDescriptionHandler.peerConnection.getSenders().forEach((function(e){e.track.enabled=!1})))})),t.setState({isMute:!t.state.isMute})},t.settingChangers={mic:function(e){t.setState({settings:Object(c.a)(Object(c.a)({},t.state.settings),{},{mic:e})})},touchTones:function(e){t.setState({settings:Object(c.a)(Object(c.a)({},t.state.settings),{},{touchTones:e})})},ringer:function(e){Object.keys(x.a).forEach((function(e){x.a[e].pause()})),x.a[e].play(),t.setState({settings:Object(c.a)(Object(c.a)({},t.state.settings),{},{ringer:e})})}},t.handleCallInvite=function(e){e.delegate={onMessage:function(e){Object(O.b)("message->"+e)},onNotify:function(e){Object(O.b)("notification->"+e)},onAck:function(e){Object(O.b)("ack->"+e)},onBye:function(e){Object(O.b)("bye->"+e)}},e._onCancel=function(e){x.a[t.state.settings.ringer].pause(),t.setState({invitation:null}),Object(O.b)("Invitation  cancelled.")},x.a[t.state.settings.ringer].currentTime=0,x.a[t.state.settings.ringer].play(),t.setState(Object(c.a)(Object(c.a)({},t.state),{},{invitation:e}))},t.handleCallDialogButtons=function(e){switch(x.a[t.state.settings.ringer].currentTime=0,x.a[t.state.settings.ringer].pause(),e){case w.a.ACCEPT:t.incommingAccept();break;case w.a.END_ACCEPT:t.endAccept();break;case w.a.HOLD_ACCEPT:t.holdAccept();break;case w.a.REJECT:var n=t.state.invitation;t.state.invitation.reject({statusCode:486,reasonPhrase:"busy"}),t.setState(Object(c.a)(Object(c.a)({},t.state),{},{invitation:null}),(function(){t.writeCallHistory({isIncomming:!0,isConference:!1,from:n.localIdentity.uri.user,to:t.props.UserAgent.configuration.authorizationUsername,start:new Date,duration:0})}))}},t.writeCallHistory=function(e){Object(O.b)(JSON.stringify(e))},t.incommingAccept=function(){var e=Object(O.a)(),n=t.state.invitation;n.delegate={onBye:function(n){var s=t.state.calls.find((function(t){return t.id===e}));s&&t.writeCallHistory({isIncomming:s.isInward,isConference:s.isConference,from:s.session.remoteIdentity.uri.user,to:t.props.server.user,start:s.timestamp,duration:s.duration});var a=t.state.calls.filter((function(t){return t.id!==e}));t.setState({calls:a})}},n.stateChange.addListener((function(s){switch(s){case h.a.Establishing:Object(O.b)("IN Session Establishing");break;case h.a.Established:Object(O.b)("IN Session Established");var a=n.sessionDescriptionHandler;if(t.mediaElement.srcObject=a.remoteMediaStream,t.state.calls.find((function(t){return t.id===e})).timer=setInterval((function(){var n=t.state.calls.find((function(t){return t.id===e}));n&&n.duration++,t.forceUpdate()}),1e3),t.state.isMute)n.sessionDescriptionHandler.peerConnection.getSenders().forEach((function(e){e.track.enabled=!1}));break;case h.a.Terminated:Object(O.b)("IN session terminated")}}));var s={sessionDescriptionHandlerOptions:{constraints:{audio:{deviceId:t.state.settings.mic},video:!1}}};t.state.invitation.accept(s);var r={id:e,number:n.remoteIdentity.uri.user,name:n.remoteIdentity.displayName,isInward:!0,duration:0,session:n,timestamp:new Date,isHold:!1,End:function(){var n=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,s){var a=t.state.calls.filter((function(t){return t.id!==e}));t.setState({calls:a},(function(){t.cleanUpMedia(),n(!0)}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},c=t.state.calls;c.push(r),t.setState({calls:c,invitation:null})},t.swapCalls=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.state.calls.forEach((function(e){e.session.state===h.a.Established&&(!0===e.isHold?(e.isHold=!1,e.session.invite({sessionDescriptionHandlerModifiers:[]})):(e.isHold=!0,e.session.invite({sessionDescriptionHandlerModifiers:[p.a.holdModifier]})))})),t.forceUpdate((function(){e(!0)}))})));case 1:case"end":return e.stop()}}),e)}))),t.initiateCall=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.state.calls.length>1&&e(!0),-1!==t.state.calls.findIndex((function(e){return!1===e.isHold}))&&t.swapCalls();var s=Object(O.a)();if(!(t.state.dialerNumber.length<3)){var r=j.a.makeURI("sip:".concat(t.state.dialerNumber,"@").concat(t.props.server.server));if(!r)throw new Error("Failed to create target URI.");var c={earlyMedia:!0,sessionDescriptionHandlerOptions:{constraints:{audio:{deviceId:t.state.settings.mic},video:!1}}},o=new f.a(t.props.UserAgent,r,c),l=o;o.delegate={onAck:function(e){Object(O.b)("Ack->"+v.a)},onInfo:function(e){Object(O.b)("info->"+e)},onInvite:function(e){Object(O.b)("Invite"+e)},onMessage:function(e){Object(O.b)("out message->"+e)},onNotify:function(e){Object(O.b)("out nofif"+e)},onRefer:function(e){Object(O.b)("out refer->"+e)},onBye:function(e){var n=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:n})}},o.stateChange.addListener((function(e){switch(e){case h.a.Establishing:Object(O.b)("OUT session Establishing");break;case h.a.Established:Object(O.b)("OUT session established");var n=l.sessionDescriptionHandler;n.peerConnection.getReceivers().forEach((function(e){t.RemoteStream.addTrack(e.track)})),t.state.isMute&&n.peerConnection.getReceivers().forEach((function(e){e.track.enabled=!1})),t.mediaElement.srcObject=t.RemoteStream;var a=t.state.calls.find((function(e){return e.id===s}));if(!a)return;a.timer=setInterval((function(){var e=t.state.calls.find((function(e){return e.id===s}));e&&e.duration++,t.forceUpdate()}),1e3);break;case h.a.Terminated:Object(O.b)("Out session Terminated");var i=t.state.calls.find((function(e){return e.id===s}));i&&t.writeCallHistory({isIncomming:!1,isConference:!1,from:t.props.server.user,to:i.number,start:i.timestamp,duration:i.duration});var r=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:r})}})),o.invite().then((function(){Object(O.b)("Invite send success")})).catch((function(e){Object(O.b)("Error Inviting->"+e)}));var d={id:s,number:t.state.dialerNumber,name:t.state.dialerNumber,isInward:!0,duration:0,session:o,timestamp:new Date,isHold:!1,End:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:a},(function(){t.cleanUpMedia(),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},u=t.state.calls;u.push(d),t.setState({calls:u,dialerNumber:""})}})));case 1:case"end":return e.stop()}}),e)}))),t.disconnectCall=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var s=t.state.calls.find((function(e){return!1===e.isHold})),a=t.state.calls.find((function(e){return!0===e.isHold}));s?s.session.state===h.a.Initial||s.session.state===h.a.Establishing?s.session.cancel():(s.session.bye(),s.End().then((function(){e(!0)}))):a&&(a.session.bye(),a.End().then((function(){e(!0)})))})));case 1:case"end":return e.stop()}}),e)}))),t.holdAccept=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.swapCalls();case 2:t.incommingAccept();case 3:case"end":return e.stop()}}),e)}))),t.endAccept=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnectCall();case 2:t.incommingAccept();case 3:case"end":return e.stop()}}),e)}))),t.cleanUpMedia=function(){t.mediaElement.srcObject=null,t.mediaElement.pause()},t.handleCallTransfer=function(){if(t.state.transferInitiated){if(t.state.dialerNumber.length>2&&t.state.calls.length>0){var e=t.state.calls.find((function(e){return!1===e.isHold})).session||t.state.calls[0].session,n=j.a.makeURI("sip:".concat(t.state.dialerNumber,"@").concat(t.props.server.server));e.refer(n)}t.setState({transferInitiated:!1,dialerNumber:""})}else t.setState({transferInitiated:!0,dialerNumber:""})},t.handleConference=function(){return new Promise((function(e,n){var s=Object(O.a)(),r=j.a.makeURI("sip:".concat("*3","@",t.props.server.server));if(!r)throw new Error("Failed to create target URI.");var c={earlyMedia:!0,sessionDescriptionHandlerOptions:{constraints:{audio:{deviceId:t.state.settings.mic},video:!1}}},o=new f.a(t.props.UserAgent,r,c),l=o;o.delegate={onAck:function(e){Object(O.b)("Ack->"+v.a)},onInfo:function(e){Object(O.b)("info->"+e)},onInvite:function(e){Object(O.b)("Invite"+e)},onMessage:function(e){Object(O.b)("out message->"+e)},onNotify:function(e){Object(O.b)("out nofif"+e)},onRefer:function(e){Object(O.b)("out refer->"+e)},onBye:function(e){var n=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:n})}},o.stateChange.addListener((function(e){switch(e){case h.a.Establishing:Object(O.b)("OUT session Establishing");break;case h.a.Established:Object(O.b)("OUT session established");var n=l.sessionDescriptionHandler;n.peerConnection.getReceivers().forEach((function(e){t.RemoteStream.addTrack(e.track)})),t.state.isMute&&n.peerConnection.getReceivers().forEach((function(e){e.track.enabled=!1})),t.mediaElement.srcObject=t.RemoteStream;var a=t.state.calls.find((function(e){return e.id===s}));if(!a)return;a.timer=setInterval((function(){var e=t.state.calls.find((function(e){return e.id===s}));e&&e.duration++,t.forceUpdate()}),1e3);break;case h.a.Terminated:Object(O.b)("Out session Terminated");var i=t.state.calls.find((function(e){return e.id===s}));i&&t.writeCallHistory({isIncomming:!1,isConference:!1,from:t.props.server.user,to:i.number,start:i.timestamp,duration:i.duration});var r=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:r})}})),o.invite().then((function(){Object(O.b)("Invite send success")})).catch((function(e){Object(O.b)("Error Inviting->"+e)}));var d={id:s,number:t.state.dialerNumber,name:t.state.dialerNumber,isInward:!0,duration:0,session:o,timestamp:new Date,isHold:!1,End:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=t.state.calls.filter((function(e){return e.id!==s}));t.setState({calls:a},(function(){t.cleanUpMedia(),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},u=t.state.calls;u.push(d),t.setState({calls:u,dialerNumber:""})}))},t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.mediaElement=document.getElementById("audio");var t=Array();navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(n){(n.forEach((function(e){"audioinput"===e.kind&&t.push({name:e.label,deviceId:e.deviceId})})),e.setState({mediaDevices:t}),0===e.state.mediaDevices.length)?window.confirm("No Media device found. Please connect device.")&&window.location.reload():e.setState({settings:Object(c.a)(Object(c.a)({},e.state.settings),{},{mic:e.state.mediaDevices[0].deviceId})})})).catch((function(e){Object(O.b)("Error Getting media "+e.name+": "+e.message)})):Object(O.b)("enumerateDevices() not supported."),this.props.UserAgent.delegate={onInvite:this.handleCallInvite},document.addEventListener("keyup",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"render",value:function(){return Object(E.jsxs)("div",{className:"container-fluid d-flex m-0 p-0",style:{height:"100vh",overflow:"hidden"},children:[Object(E.jsxs)("div",{className:"row justify-content-center border m-2 pb-0 flex-grow-1",children:[Object(E.jsx)("div",{className:"col-sm-6 d-none",id:"history",children:"History Goes Here"}),Object(E.jsxs)("div",{className:"col-sm-6 col-md-6 col-lg-6 col-xl-6 border d-flex flex-column",style:{width:"480px"},children:[Object(E.jsx)(C.a,{handleButtonPress:this.handleDialerKeyPress,homeState:this.state,settingChangers:this.settingChangers}),Object(E.jsx)(y.a,{handleButtonPress:this.handleCallDialogButtons,invitation:this.state.invitation,hasActiveCall:!!this.state.calls.find((function(e){return!1===e.isHold}))}),Object(E.jsx)(N.a,{homeState:this.state,UA:this.props.UserAgent,handleInput:this.handleInput}),Object(E.jsx)(g.a,{homeState:this.state,handleKeypress:this.handleDialerKeyPress})]})]}),Object(E.jsx)("audio",{id:"audio",autoPlay:!0,playsInline:!0})]})}}]),s}(m.a.Component)}).call(this,n(120))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(1),a=n(3),i=n(4),r=n(5),c=n(16),o=n(11),l=n(0),d=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{className:"d-flex flex-row justify-content-center",children:Object(l.jsxs)("div",{className:"d-flex flex-column justify-content-start",children:[Object(l.jsxs)("div",{className:"d-flex flex-row",children:[Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("1")},children:["1",Object(l.jsx)("div",{className:"sub",children:" "})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("2")},children:["2",Object(l.jsx)("div",{className:"sub",children:"ABC"})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("3")},children:["3",Object(l.jsx)("div",{className:"sub",children:"DEF"})]})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",disabled:0===this.props.homeState.calls.length,onClick:function(){return e.props.handleKeypress(o.a.SWAP)},children:Object(l.jsx)("i",{className:"bi bi-arrow-repeat"})})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",onClick:function(){return e.props.handleKeypress(o.a.MUTE)},style:{backgroundColor:this.props.homeState.isMute?"red":""},children:Object(l.jsx)("i",{className:this.props.homeState.isMute?"bi bi-mic-fill":"bi bi-mic-mute-fill"})})})]}),Object(l.jsxs)("div",{className:"d-flex flex-row",children:[Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("4")},children:["4",Object(l.jsx)("div",{className:"sub",children:"GHI"})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("5")},children:["5",Object(l.jsx)("div",{className:"sub",children:"JKL"})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("6")},children:["6",Object(l.jsx)("div",{className:"sub",children:"MNO"})]})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",disabled:2!==this.props.homeState.calls.length,style:{},onClick:function(){return e.props.handleKeypress(o.a.CONFERENCE)},children:Object(l.jsx)("i",{className:"bi bi-people-fill"})})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",disabled:0===this.props.homeState.calls.length,style:{backgroundColor:this.props.homeState.transferInitiated?"greenyellow":""},onClick:function(){return e.props.handleKeypress(o.a.TRANSFER)},children:Object(l.jsx)("i",{className:"bi bi-telephone-forward-fill"})})})]}),Object(l.jsxs)("div",{className:"d-flex flex-row",children:[Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("7")},children:["7",Object(l.jsx)("div",{className:"sub",children:"PQRS"})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("8")},children:["8",Object(l.jsx)("div",{className:"sub",children:"TUV"})]})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsxs)("button",{className:"digit",onClick:function(){return e.props.handleKeypress("9")},children:["9",Object(l.jsx)("div",{className:"sub",children:"WXYZ"})]})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",style:{},onClick:function(){return e.props.handleKeypress("hold")},children:Object(l.jsx)("i",{className:"bi bi-pause-fill"})})}),Object(l.jsx)("div",{className:"m-1 p-1",children:Object(l.jsx)("button",{className:"round_button",style:{},onClick:function(){return e.props.handleKeypress("swap")},children:Object(l.jsx)("i",{className:"bi bi-telephone-plus-fill"})})})]}),Object(l.jsxs)("div",{className:"d-flex flex-row",children:[Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsx)("button",{className:"digit justify-center",onClick:function(){return e.props.handleKeypress("*")},children:"*"})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsx)("button",{className:"digit justify-center",onClick:function(){return e.props.handleKeypress("0")},children:"0"})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsx)("button",{className:"digit justify-center",onClick:function(){return e.props.handleKeypress("#")},children:"#"})}),Object(l.jsxs)("div",{className:"m-1 p-1",children:[" ",Object(l.jsx)("button",{className:"round_button",style:{},onClick:function(){return e.props.handleKeypress(o.a.SETTINGS)},children:Object(l.jsx)("i",{className:"bi bi-gear-fill"})})]}),Object(l.jsxs)("div",{className:"m-1 p-1",children:[" ",Object(l.jsx)("button",{className:"round_button",onClick:function(){return e.props.handleKeypress(o.a.EXIT)},children:Object(l.jsx)("i",{className:"bi bi-house-fill"})})]})]}),Object(l.jsxs)("div",{className:"d-flex flex-row",children:[Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsx)("button",{className:"round_button",onClick:function(){return e.props.handleKeypress("e")},children:Object(l.jsx)("i",{className:"bi bi-backspace-fill"})})}),Object(l.jsx)("div",{className:"mx-1 p-1",children:Object(l.jsx)("button",{className:"round_button",style:{backgroundColor:"green",width:"150px",borderRadius:"40px"},onClick:function(){return e.props.handleKeypress(o.a.CALL)},children:Object(l.jsx)("i",{className:"bi bi-telephone-fill"})})}),Object(l.jsx)("div",{className:"mx-auto py-1",children:Object(l.jsx)("button",{className:"round_button",style:{width:"150px",borderRadius:"40px",backgroundColor:"#ff0000"},onClick:function(){return e.props.handleKeypress(o.a.END)},children:Object(l.jsx)("i",{className:"bi bi-telephone-fill",style:{transform:"rotate(135deg) scale(1.8)"}})})})]})]})})}}]),n}(c.Component)},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(1),a=n(3),i=n(4),r=n(5),c=n(16),o=n(11),l=n(0),d=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return this.props.invitation?Object(l.jsxs)("div",{className:"d-block position-absolute bg-info p-2",style:{zIndex:99,width:"454px"},children:[Object(l.jsx)("div",{className:"row text-center",children:Object(l.jsx)("div",{className:"col mx-auto",children:Object(l.jsx)("p",{className:"h5",children:"Call From ".concat(this.props.invitation.remoteIdentity.displayName," (").concat(this.props.invitation.remoteIdentity.uri.user,")")})})}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{onClick:function(){return e.props.handleButtonPress(o.a.ACCEPT)},disabled:this.props.hasActiveCall,style:{height:"52px"},className:"form-control btn btn-sm btn-success",children:"Accept"})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{disabled:!this.props.hasActiveCall,onClick:function(){return e.props.handleButtonPress(o.a.HOLD_ACCEPT)},style:{height:"52px"},className:"form-control btn btn-sm btn-success",children:"Hold & Accept"})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{disabled:!this.props.hasActiveCall,onClick:function(){return e.props.handleButtonPress(o.a.END_ACCEPT)},style:{height:"52px"},className:"form-control btn btn-sm btn-success",children:"End & Accept"})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{onClick:function(){return e.props.handleButtonPress(o.a.REJECT)},style:{height:"52px"},className:"form-control btn btn-sm btn-danger",children:"Reject"})})]})]}):null}}]),n}(c.Component)},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(1),a=n(3),i=n(4),r=n(5),c=n(16),o=n(11),l=n(0),d=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleSelectChange=function(e){console.log(e)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return this.props.homeState.showSettings?Object(l.jsxs)("div",{className:"d-block position-absolute bg-light border p-2 mt-4",style:{zIndex:99,width:"454px"},children:[Object(l.jsxs)("div",{className:"form-group my-2",children:[Object(l.jsx)("label",{htmlFor:"mic",children:"Default Mic"}),Object(l.jsx)("select",{className:"form-select",id:"mic",value:this.props.homeState.settings.mic,onChange:function(t){e.props.settingChangers.mic(t.target.value)},children:this.props.homeState.mediaDevices.map((function(e){return Object(l.jsx)("option",{value:e.deviceId,children:e.name},e.deviceId)}))})]}),Object(l.jsxs)("div",{className:"form-group my-2",children:[Object(l.jsx)("label",{htmlFor:"ringer",children:"ringtone"}),Object(l.jsx)("select",{className:"form-select",id:"ringer",value:this.props.homeState.settings.ringer,onChange:function(t){e.props.settingChangers.ringer(t.target.value)},children:["ring1","ring2","ring3","ring4","ring5"].map((function(e){return Object(l.jsx)("option",{value:e,children:e.toLocaleUpperCase()},e)}))})]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",type:"checkbox",id:"gridCheck",checked:this.props.homeState.settings.touchTones,onChange:function(t){return e.props.settingChangers.touchTones(t.target.checked)}}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:"gridCheck",children:"Touch Tones"})]})}),Object(l.jsx)("div",{className:"form-group my-2",children:Object(l.jsx)("button",{className:"btn btn-primary max-auto",onClick:function(){return e.props.handleButtonPress(o.a.SETTINGS)},children:"Save"})})]}):null}}]),n}(c.Component)},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var s=n(1),a=n(3),i=n(4),r=n(5),c=n(16),o=n.n(c),l=n(0),d=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(a.a)(n,[{key:"render",value:function(){return this.props.call?this.props.isActive?Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[Object(l.jsx)("div",{className:"mx-auto"}),Object(l.jsx)("div",{className:"mx-auto py-2",children:Object(l.jsx)("strong",{className:"m-0 active-number",children:this.props.call.number})}),Object(l.jsx)("div",{className:"mx-auto py-2",children:new Date(1e3*this.props.call.duration).toISOString().substring(11,19)})]})}):Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"d-flex flex-row justify-content-between flex-wrap flex-grow-1",children:[Object(l.jsx)("div",{className:"d-flex px-0"}),Object(l.jsx)("div",{className:"px-2",children:Object(l.jsx)("i",{className:"bi bi-telephone-forward-fill pe-none"})}),Object(l.jsx)("div",{className:"px-2",children:Object(l.jsx)("h5",{className:"m-0 user-select-none park-number",children:this.props.call.number})}),Object(l.jsx)("div",{className:"px-2",children:Object(l.jsx)("small",{className:"m-0 user-select-none park-timer",children:new Date(1e3*this.props.call.duration).toISOString().substring(11,19)})}),Object(l.jsx)("div",{className:"px-2",children:Object(l.jsx)("i",{className:"bi bi-pause-fill pe-none blink text-success"})}),Object(l.jsx)("div",{className:"d-flex px-0"})]})}):""}}]),n}(c.Component),u=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{id:"display",className:"d-flex flex-column mb-3",children:[Object(l.jsx)("div",{className:"row",style:{margin:"10px",alignItems:"center",backgroundColor:"white"},children:Object(l.jsxs)("div",{className:"col-4 d-flex flex-row",style:{alignItems:"center"},children:[Object(l.jsx)("i",{id:"registration_indicator",className:"bi bi-lock-fill text-success",style:{transform:"scale(1.5)"}}),Object(l.jsx)("h4",{id:"registration_user",className:"ms-3 mt-0 mb-0",children:this.props.UA.configuration.authorizationUsername})]})}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{style:{backgroundColor:"var(--screen-back-color)",borderRadius:"24px",height:"220px"},children:[Object(l.jsx)("div",{id:"parkedCalls",className:"row d-flex flex-row mt-3",style:{height:"24px"},children:Object(l.jsx)("div",{className:"col-12",children:Object(l.jsx)(d,{call:this.props.homeState.calls.find((function(e){return!0===e.isHold})),isActive:!1})})}),Object(l.jsx)("div",{id:"activeCall",className:"row d-flex flex-row my-2",style:{height:"104px"},children:Object(l.jsx)("div",{className:"col-12",children:Object(l.jsx)(d,{call:this.props.homeState.calls.find((function(e){return!1===e.isHold})),isActive:!0})})}),Object(l.jsx)("div",{id:"digit-input",className:"row d-flex flex-row my-2",children:Object(l.jsx)("div",{className:"d-flex flex-row",children:Object(l.jsx)("div",{className:"d-flex flex-grow-1 mx-1 p-1",children:Object(l.jsx)("input",{className:"form-control shadow-none text-center ms-1",onChange:this.props.handleInput,value:this.props.homeState.dialerNumber,type:"text",name:"dialerNumber",id:"dialerNumber",autoComplete:"off",placeholder:"_",style:{color:"var(--screen-text-color)",fontFamily:"Roboto",fontSize:"1.7rem",backgroundColor:"var(--back-color)",border:"none",width:"100%"}})})})})]})]})}}]),n}(o.a.Component)},8:function(e,t,n){"use strict";function s(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function a(e){var t=(new Date).toISOString();console.log("".concat(t,"\t ").concat(e))}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))}},[[122,1,2]]]);
//# sourceMappingURL=main.f8d2d6f7.chunk.js.map